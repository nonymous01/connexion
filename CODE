from dotenv import dotenv_values
from f1ai_client import f1ai_client

# Load environment variables
config = dotenv_values('.env')

# Convert token to bytes as required by f1ai_client
TOKEN = config.get("EU_WEST_1_TOKEN").encode()


def process():
    try:
        # Initialize client with token (must be bytes)
        client = f1ai_client.init(TOKEN)

        # Promote model registration
        response_json = client.promote_model_registration(
            model_name="irisclassifier",
            model_version=1,
            model_source="databricks_uc"  # Options: 'databricks_registry', 'databricks_uc', 'aws_model_registry'
        )

        # Print the response
        print(response_json)

    except Exception as e:
        # Handle any exception during client usage
        print(f"Error occurred: {e}")


if __name__ == "__main__":
    process()
