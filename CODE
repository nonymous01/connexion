import logging
logger = logging.getLogger(__name__)

def _get_request_context_authorizer(event):
    if "requestContext" not in event:
        logger.warning("⚠️ No requestContext provided. Assuming non-API Gateway invocation.")
        return {
            "principalId": "anonymous",
            "claims": {}
        }
    return event["requestContext"].get("authorizer", {})
