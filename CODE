from dotenv import dotenv_values
from f1ai_client import f1ai_client

# Load environment variables from the .env file
config = dotenv_values('.env')

# Retrieve the API token from environment variables
TOKEN = config.get("EU_WEST_1_TOKEN")


def process():
    # Initialize the F1AI client with the API token
    client = f1ai_client.init(TOKEN)

    try:
        # Attempt to promote the model registration
        response_json = client.promote_model_registration(
            model_name="irisclassifier",         # Name of the model to promote
            model_version=1,                     # Version number of the model
            model_source="databricks_uc"         # Source of the model ('databricks_registry', 'databricks_uc', or 'aws_model_registry')
        )

        # Print the response for debugging or verification
        print(response_json)

    except Exception as e:
        # Handle any exception that occurs during the API call
        print(f"An error occurred while promoting the model: {e}")


# Run the script only if it's the main file being executed
if __name__ == "__main__":
    process()
