def _transform_response(response):
    try:
        response.raise_for_status()  # LÃ¨ve une exception HTTP pour les codes 4xx/5xx
        if response.headers.get('Content-Type', '').startswith('application/json'):
            return response.json()
        else:
            print("Warning: Expected JSON but got:", response.text)
            return {"message": "Non-JSON response", "content": response.text}
    except requests.exceptions.HTTPError as http_err:
        print(f"HTTP error occurred: {http_err} - Response: {response.text}")
        raise
    except ValueError as json_err:
        print(f"JSON decode error: {json_err} - Raw response: {response.text}")
        raise
